<html class="html">
<head>
  <meta charset="UTF-8">
  <title>Richmond Then & Now</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <style type="text/css">
    html, body, .container {
    height: 100%;
    width: 100%;
    overflow: hidden;
    padding:0;
    }

    body {
      padding-top: 50px;
    }

    #map {
      width:auto;
      height:100%;
      box-shadow: 0 0 10px rgba(0,0,0,0.55);
    }

    .navbar .navbar-brand {
      font-weight: bold;
      font-size: 25px;
      color: #FFFFFF;
    }

    .navbar {
      background-image: linear-gradient(to bottom, #2b6988 0%, #1f4b61 100%);
    }

    .navbar-inverse .navbar-nav>li>a {
      color: #fff;
    }

    #sidebar {
      width: 350px;
      height: 100%;
      max-width: 100%;
      float: right;
      -webkit-transition: all 0.25s ease-out;
      -moz-transition: all 0.25s ease-out;
      transition: all 0.25s ease-out;
    }

    .leaflet-control-geosearch {
      display:none;
    }

    #twitter-widget-0 {
      margin-top: 15px;
    }

    #sidebar-footer {
      position: absolute;
      bottom: 0;
    }
  </style>
</head>
<body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <div class="navbar-icon-container">
            <a href="#" class="navbar-icon pull-right visible-xs" id="nav-btn"><i class="fa fa-bars fa-lg white"></i></a>
            <a href="#" class="navbar-icon pull-right visible-xs" id="sidebar-toggle-btn"><i class="fa fa-search fa-lg white"></i></a>
          </div>
          <a class="navbar-brand" href="#">Richmond Then & Now Scratchoff</a>
        </div>
        <div class="navbar-collapse collapse">
          <div class="navbar-form navbar-right" role="search">
            <div class="form-group has-feedback">
                <span class="twitter-typeahead" style="position: static; display: block; direction: ltr;"><input id="searchbox" type="text" placeholder="Search for an address" class="form-control tt-input" autocomplete="off" spellcheck="false" dir="auto" style="position: relative; vertical-align: top;"><pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: pre; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre><span class="tt-dropdown-menu" style="position: absolute; top: 100%; left: 0px; z-index: 100; display: none; right: auto;"><div class="tt-dataset-Boroughs"></div><div class="tt-dataset-Theaters"></div><div class="tt-dataset-Museums"></div><div class="tt-dataset-GeoNames"></div></span></span>
                <span id="searchicon" class="fa fa-search form-control-feedback"></span>
            </div>
          </div>


          <ul class="nav navbar-nav">
            <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="about-btn"><i class="fa fa-question-circle white"></i>&nbsp;&nbsp;About</a></li>
            <li><a href="https://github.com/jmadron/Richmond_Then_Now" data-toggle="collapse" data-target=".navbar-collapse.in" id="about-btn"><i class="fa fa-question-circle white"></i>&nbsp;&nbsp;Github</a></li>
            <li><a href="http://www.letsgetspatial.com/">Blog</a></li>
            <li><a href="https://twitter.com/share" class="twitter-share-button"{count} data-url="http://urbanscratchoff.com" data-text="Richmond Then & Now - Scratch away historical imagery of Richmond,VA" data-via="justinmadron">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></li>
            <!-- <li class="dropdown">
              <a id="toolsDrop" href="#" role="button" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-globe white"></i>&nbsp;&nbsp;Tools <b class="caret"></b></a>
              <ul class="dropdown-menu">
                <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="full-extent-btn"><i class="fa fa-arrows-alt"></i>&nbsp;&nbsp;Zoom To Full Extent</a></li>
                <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="legend-btn"><i class="fa fa-picture-o"></i>&nbsp;&nbsp;Show Legend</a></li>
                <li class="divider hidden-xs"></li>
                <li><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="login-btn"><i class="fa fa-user"></i>&nbsp;&nbsp;Login</a></li>
              </ul>
            </li>
            <li class="dropdown">
                <a class="dropdown-toggle" id="downloadDrop" href="#" role="button" data-toggle="dropdown" aria-expanded="false"><i class="fa fa-cloud-download white"></i>&nbsp;&nbsp;Download <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="data/boroughs.geojson" download="boroughs.geojson" target="_blank" data-toggle="collapse" data-target=".navbar-collapse.in"><i class="fa fa-download"></i>&nbsp;&nbsp;Boroughs</a></li>
                  <li><a href="data/subways.geojson" download="subways.geojson" target="_blank" data-toggle="collapse" data-target=".navbar-collapse.in"><i class="fa fa-download"></i>&nbsp;&nbsp;Subway Lines</a></li>
                  <li><a href="data/DOITT_THEATER_01_13SEPT2010.geojson" download="theaters.geojson" target="_blank" data-toggle="collapse" data-target=".navbar-collapse.in"><i class="fa fa-download"></i>&nbsp;&nbsp;Theaters</a></li>
                  <li><a href="data/DOITT_MUSEUM_01_13SEPT2010.geojson" download="museums.geojson" target="_blank" data-toggle="collapse" data-target=".navbar-collapse.in"><i class="fa fa-download"></i>&nbsp;&nbsp;Museums</a></li>
                </ul>
            </li>
            <li class="hidden-xs"><a href="#" data-toggle="collapse" data-target=".navbar-collapse.in" id="list-btn"><i class="fa fa-list white"></i>&nbsp;&nbsp;POI List</a></li> -->
          </ul>
        </div><!--/.navbar-collapse -->
      </div>
    </div>
  <div class="container">
      <div id="sidebar">
        <div class="col-md-12">
          <br/>
          <h4>Richmond Then and Now</h4>
          <p>Explore Richmond, Virginia in 1876, a decade after the end of the Civil War compared to present day Richmond. Wonderful details of buildings and their owners, parks and public buildings over-layed with a current aerial image of the city. Pan around and explore the city and use the "Scratch Off" button to see what has changed from 1867 to present day. Hit the swap button below to reverse the layers and the Pan & Zoom Map icon to move around and zoom. </p>

          <h4>Mode</h4>
            <div class="btn-group btn-group-sm buttons" role="group" aria-label="...">
              <button id="modePanAndZoom" type="button" class="btn btn-default btn-mode"><span class="glyphicon glyphicon-move" aria-hidden="true"></span> Pan & Zoom Map</button>
              <button id="modeScratchoff" type="button" class="btn btn-default btn-mode active"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Scratch Off!</button>
            </div>
            <br/><br/>
          <h4>Layer Order</h4>
          <div class="col-md-4">
            <button type="button" id="swap" class="btn btn-info" style="margin-top: 24px;
}"><span class="glyphicon glyphicon-refresh" aria-hidden="true"></span> Swap</button>
          </div>
          <div class="col-md-8">

            <button type="button" id="topLayerButton" class="btn btn-default"></button><br/><br/>
            <button type="button" id="bottomLayerButton"class="btn btn-default"></button>
            <br/><br/>  
          </div>
                  
          
  
        
    

        </div>
        <div id="sidebar-footer" class="col-md-12"><p>Map by <a href="https://twitter.com/justinmadron">@justinmadron</a></p></div> 
      </div>
      <div id="map">
          <div class="modal fade" id="aboutModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <button class="close" type="button" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3 class="modal-title">About Richmond Then and Now</h3><p>A map by <a href="https://twitter.com/justinmadron">@justinmadron</a></p>
          </div>
          <div class="modal-body">
       
            <h5>About</h5>
            <p>Richmond was a very different place a decade after the Civil War than it is today.  When we started working on the Visualizing the Past project for the Library of Virginia, we found a wonderful atlas of Richmond in 1876. This hand painted atlas, published by F.W Beers, features detailed buildings and their owners, parks and public landmarks. These maps served as our basemap for the project because of the great detail they provided. While working on the project I became really interested in what has changed around Richmond since this time.</p>

            <h5>Tech</h5>
            <p>Full Disclosure: This code was adapted from Chris Whong. The map is loading two layers.  The bottom layer is a normal leaflet.js TileLayer.  The top layer makes use of leaflet's Canvas TileLayer, essentially setting up a grid of 256x256 HTML canvases.  For each canvas, a tile image is requested from the top layer, and is drawn into the canvas.  When the user "Scratches" the canvas, they are drawing into the canvas using the 'destination-out' composite operation.  This turns the affected area transparent, allowing the bottom layer to show through! Tiles were generated for the historical map using gdal2tiles.py.  Here's <a href="http://chriswhong.com/local/building-urban-scratchoff/">a blog post about how and why Chris Whong built Urban Scratchoff.</a></p>

    
            <h5>Imagery</h5>
            <p>The historical imagery is provided by <a href="http://www.davidrumsey.com/luna/servlet/detail/RUMSEY~8~1~220667~5505213:Section-K---Richmond,-Va--?sort=Pub_List_No_InitialSort%2CPub_Date%2CPub_List_No%2CSeries_No&qvq=w4s:/who/Beers,+F.W./what/City+Atlas/where/Richmond+(Va.)/when/1876;sort:Pub_List_No_InitialSort%2CPub_Date%2CPub_List_No%2CSeries_No;lc:RUMSEY~8~1&mi=13&trs=22#">David Rumsey's Map Collection</a> site -  "Illustrated Atlas Of The City Of Richmond, Va. Published for the Southern and Southwestern Surveying and Pub. Co. By F.W. Beers, C.E. J.A. Enslow, Jr., J.P. Brown, Business Managers ... Entered ... 1876 by F.W. Beers ... Washington ."</p>  

            <p>The modern day imagery is <a href = "https://developer.mapquest.com/">Mapquest's OpenAerial</a> tileset</p>

            <h5>Attribution & Thanks</h5>
            <ul>
              <li><a href="https://twitter.com/chris_whong">Chris Whong</a> for providing the code for modification on Github</li>
			  <li><a href="http://dsl.richmond.edu/">Digital Scholarship Lab</a> for letting me host this on their site</li>
			  
			  
              

            

            <strong><a href="https://github.com/chriswhong/urbanscratchoff">The code is on github</a>.  If you find a bug, please open an issue.  If you want to contribute or fork for your city, have at it!</strong>
			<strong><a href="http://www.letsgetspatial.com/">Lets Get Spatial</a>.  If you have any questions or comments feel free to contact me via Twitter or Blog!</strong>

          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
  </div>


  </div>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-71683974-1', 'auto');
    ga('send', 'pageview');

  </script>
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
  <script src="js/l.control.geosearch.js"></script>
  <script src="js/l.geosearch.provider.google.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
  <script type="js/routers/router.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.2.0/mustache.js"></script>
  <script src="js/script.js"></script>

</body>
</html>
